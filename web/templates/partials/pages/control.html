<section class="mb-10">
  <h1 class="text-3xl md:text-4xl font-bold tracking-tight">
    Control Flow
  </h1>
</section>

<!-- 7.1 Conditionals -->
<section class="mb-10">
  <h2 class="text-2xl font-bold">Conditionals</h2>
  <p class="mt-2 text-lg text-gray-300">
    Conditionals let you run different code depending on whether a
    condition is true or false.
  </p>

  <div class="mt-4 rounded-2xl border border-gray-800 bg-gray-950 overflow-hidden">
    <div class="px-5 py-3 border-b border-gray-800 flex items-center justify-between">
      <div class="text-sm text-gray-300 font-medium">if_else.ego</div>
      <div class="text-xs text-gray-500">example</div>
    </div>
    <pre class="p-5 text-base overflow-x-auto"><code class="text-gray-200"><span class="variable">x</span> <span class="operator">:=</span> <span class="number">10</span>

<span class="keyword">if</span> <span class="variable">x</span> <span class="operator">&gt;</span> <span class="number">0</span>
  <span class="function">put</span>(<span class="string">'positive'</span>)
<span class="keyword">else</span>
  <span class="function">put</span>(<span class="string">'non-positive'</span>)
<span class="operator">;</span></code></pre>
  </div>

  <p class="mt-2 text-lg text-gray-300"><code class="text-gray-200">if</code> can also be used as an expression that produces a value.</p>
  <div class="mt-4 rounded-2xl border border-gray-800 bg-gray-950 overflow-hidden">
    <div class="px-5 py-3 border-b border-gray-800 flex items-center justify-between">
      <div class="text-sm text-gray-300 font-medium">if_expr.ego</div>
      <div class="text-xs text-gray-500">example</div>
    </div>
    <pre class="p-5 text-base overflow-x-auto"><code class="text-gray-200"><span class="variable">x</span> <span class="operator">:=</span> <span class="number">10</span>

<span class="variable">sign</span> <span class="operator">:=</span> <span class="keyword">if</span> <span class="variable">x</span> <span class="operator">&gt;</span> <span class="number">0</span>
  <span class="string">'positive'</span>
<span class="keyword">else</span>
  <span class="string">'non-positive'</span>
<span class="operator">;</span>

<span class="function">put</span>(<span class="variable">sign</span>)

<span class="comment"># you can use single line if expressions</span>
<span class="variable">isEqual</span> <span class="operator">:=</span> <span class="keyword">if</span> <span class="variable">a</span> <span class="operator">==</span> <span class="variable">b</span> <span class="operator">{</span> <span class="keyword">true</span> <span class="operator">}</span> <span class="keyword">else</span> <span class="operator">{</span> <span class="keyword">false</span> <span class="operator">}</span></code></pre>
  </div>

  <div class="mt-4 space-y-3 text-base text-gray-300">
    <div>
      <span class="font-semibold">if and else.</span>
      An <code class="text-gray-200">if</code> block checks a condition
      and runs its body when the condition is truthy. An optional
      <code class="text-gray-200">else</code> block runs when the
      condition is false.
    </div>

    <div>
      <span class="font-semibold">Nested conditionals.</span>
      You can place an <code class="text-gray-200">if</code> inside
      another <code class="text-gray-200">if</code> or
      <code class="text-gray-200">else</code> block to express more
      complex decisions.
    </div>

    <div>
      <span class="font-semibold">If expressions and nil.</span>
      When you use <code class="text-gray-200">if</code> as an expression,
      it evaluates to the value of the branch that runs. If there is no
      <code class="text-gray-200">else</code> branch and the condition is
      false, the whole expression evaluates to
      <code class="text-gray-200">nil</code>. For example,
      <code class="text-gray-200">value := if cond 'ok'</code> will set
      <code class="text-gray-200">value</code> to <code class="text-gray-200">'ok'</code>
      when <code class="text-gray-200">cond</code> is true and to
      <code class="text-gray-200">nil</code> when it is false.
    </div>

  </div>
</section>

<!-- 7.2 Loops -->
<section class="mb-10">
  <h2 class="text-2xl font-bold">Loops</h2>
  <p class="mt-2 text-lg text-gray-300">
    Loops let you repeat a block of code multiple times. Ego uses a
    single <code class="text-gray-200">for</code> construct for both
    general loops and simple ranges.
  </p>

  <div class="mt-4 rounded-2xl border border-gray-800 bg-gray-950 overflow-hidden">
    <div class="px-5 py-3 border-b border-gray-800 flex items-center justify-between">
      <div class="text-sm text-gray-300 font-medium">for_while.ego</div>
      <div class="text-xs text-gray-500">example</div>
    </div>
    <pre class="p-5 text-base overflow-x-auto"><code class="text-gray-200"><span class="variable">i</span> <span class="operator">:=</span> <span class="number">0</span>
<span class="keyword">for</span> <span class="variable">i</span> <span class="operator">&lt;</span> <span class="number">3</span>
  <span class="function">put</span>(<span class="string">'loop: '</span> <span class="operator">+</span> <span class="function">str</span>(<span class="variable">i</span>))
  <span class="variable">i</span> <span class="operator">=</span> <span class="variable">i</span> <span class="operator">+</span> <span class="number">1</span>
<span class="operator">;</span></code></pre>
  </div>

  <div class="mt-4 rounded-2xl border border-gray-800 bg-gray-950 overflow-hidden">
    <div class="px-5 py-3 border-b border-gray-800 flex items-center justify-between">
      <div class="text-sm text-gray-300 font-medium">for_to.ego</div>
      <div class="text-xs text-gray-500">example</div>
    </div>
    <pre class="p-5 text-base overflow-x-auto"><code class="text-gray-200"><span class="comment"># for to loops are inclusive</span>

<span class="keyword">for</span> <span class="variable">i</span> <span class="operator">:=</span> <span class="number">0</span> <span class="keyword">to</span> <span class="number">3</span>
  <span class="function">put</span>(<span class="variable">i</span>)
<span class="operator">;</span>

<span class="keyword">for</span> <span class="variable">i</span> <span class="operator">:=</span> <span class="number">3</span> <span class="keyword">to</span> <span class="number">0</span>
  <span class="function">put</span>(<span class="variable">i</span>)
<span class="operator">;</span></code></pre>
  </div>

  <div class="mt-4 rounded-2xl border border-gray-800 bg-gray-950 overflow-hidden">
    <div class="px-5 py-3 border-b border-gray-800 flex items-center justify-between">
      <div class="text-sm text-gray-300 font-medium">for_in.ego</div>
      <div class="text-xs text-gray-500">example</div>
    </div>
    <pre class="p-5 text-base overflow-x-auto"><code class="text-gray-200"><span class="variable">arr</span> <span class="operator">:=</span> <span class="operator">[</span><span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span><span class="operator">]</span>
<span class="keyword">for</span> <span class="variable">index</span>, <span class="variable">value</span> <span class="keyword">in</span> <span class="variable">arr</span>
  <span class="function">put</span>(<span class="function">str</span>(<span class="variable">index</span>) <span class="operator">+</span> <span class="string">' '</span> <span class="operator">+</span> <span class="function">str</span>(<span class="variable">value</span>))
<span class="operator">;</span>

<span class="variable">mp</span> <span class="operator">:=</span> <span class="operator">{</span><span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span><span class="operator">}</span>
<span class="keyword">for</span> <span class="variable">key</span>, <span class="variable">value</span> <span class="keyword">in</span> <span class="variable">mp</span>
  <span class="function">put</span>(<span class="function">str</span>(<span class="variable">key</span>) <span class="operator">+</span> <span class="string">' '</span> <span class="operator">+</span> <span class="function">str</span>(<span class="variable">value</span>))
<span class="operator">;</span>

<span class="variable">text</span> <span class="operator">:=</span> <span class="string">'ego'</span>
<span class="keyword">for</span> <span class="variable">index</span>, <span class="variable">char</span> <span class="keyword">in</span> <span class="variable">text</span>
  <span class="function">put</span>(<span class="function">str</span>(<span class="variable">index</span>) <span class="operator">+</span> <span class="string">' '</span> <span class="operator">+</span> <span class="function">str</span>(<span class="variable">char</span>))
<span class="operator">;</span></code></pre>
  </div>

  <div class="mt-4 space-y-3 text-base text-gray-300">
    <div>
      <span class="font-semibold">for.</span>
      A <code class="text-gray-200">for</code> loop repeats while its
      condition is truthy. You update loop variables inside the body.
    </div>

    <div>
      <span class="font-semibold">Range loops with to.</span>
      The syntax <code class="text-gray-200">for i := a to b</code>
      counts <code class="text-gray-200">i</code> from
      <code class="text-gray-200">a</code> to
      <code class="text-gray-200">b</code>, inclusive.
    </div>

    <div>
      <span class="font-semibold">Automatic direction.</span>
      A range loop automatically chooses to count up or down based on the
      start and end values, so both
      <code class="text-gray-200">for i := 0 to 3</code> and
      <code class="text-gray-200">for i := 3 to 0</code> work.
    </div>

    <div>
      <span class="font-semibold">Loop variables.</span>
      The loop variable is just a normal variable; you can read and
      modify it inside the loop body.
    </div>

    <div>
      <span class="font-semibold">for in over collections.</span>
      Use <code class="text-gray-200">for i, v in arr</code> for arrays,
      <code class="text-gray-200">for k, v in mp</code> for maps, and
      <code class="text-gray-200">for i, c in text</code> for strings to
      iterate over elements with their index or key. You can use
      <code class="text-gray-200">_</code> to discard one or both
      variables, for example <code class="text-gray-200">for _, v in arr</code>
      or <code class="text-gray-200">for i, _ in text</code>.
    </div>
  </div>
</section>

<!-- 7.3 Loop Control -->
<section class="mb-10">
  <h2 class="text-2xl font-bold">Loop Control</h2>
  <p class="mt-2 text-lg text-gray-300">
    Loop control constructs change how and when a loop continues
    executing.
  </p>

  <div class="mt-4 rounded-2xl border border-gray-800 bg-gray-950 overflow-hidden">
    <div class="px-5 py-3 border-b border-gray-800 flex items-center justify-between">
      <div class="text-sm text-gray-300 font-medium">again_break.ego</div>
      <div class="text-xs text-gray-500">example</div>
    </div>
    <pre class="p-5 text-base overflow-x-auto"><code class="text-gray-200"><span class="variable">i</span> <span class="operator">:=</span> <span class="number">0</span>

<span class="keyword">for</span> <span class="variable">i</span> <span class="operator">&lt;</span> <span class="number">5</span>
  <span class="variable">i</span> <span class="operator">=</span> <span class="variable">i</span> <span class="operator">+</span> <span class="number">1</span>

  <span class="keyword">if</span> <span class="variable">i</span> <span class="operator">==</span> <span class="number">3</span>
    <span class="keyword">again</span>  <span class="comment"># restart the loop at the top</span>
  <span class="operator">;</span>

  <span class="keyword">if</span> <span class="variable">i</span> <span class="operator">==</span> <span class="number">4</span>
    <span class="keyword">break</span>  <span class="comment"># exit the loop entirely</span>
  <span class="operator">;</span>

  <span class="function">put</span>(<span class="variable">i</span>)
<span class="operator">;</span></code></pre>
  </div>

  <div class="mt-4 space-y-3 text-base text-gray-300">
    <div>
      <span class="font-semibold">again.</span>
      The <code class="text-gray-200">again</code> statement skips the
      rest of the loop body and continues with the next iteration. It is equivalent to
      the <code class="text-gray-200">continue</code> statement in other languages.
    </div>

    <div>
      <span class="font-semibold">break.</span>
      The <code class="text-gray-200">break</code> statement immediately
      exits the nearest enclosing loop, skipping any remaining
      iterations.
    </div>

    <div>
      <span class="font-semibold">Outside loops.</span>
      Using <code class="text-gray-200">again</code> or
      <code class="text-gray-200">break</code> outside of a loop is not
      allowed.
    </div>

    <div>
      <span class="font-semibold">Parse errors.</span>
      Incorrect use of loop control (such as
      <code class="text-gray-200">again</code> outside a loop) is reported
      as a compile-time error.
    </div>
  </div>
</section>

<!-- Navigation: Previous / Next -->
<section class="mt-12 pt-8 border-t border-gray-800 flex flex-col items-center text-center text-base gap-3">
  <div class="flex flex-col sm:flex-row gap-3">
    <button
      type="button"
      onclick="document.getElementById('link-expressions')?.click()"
      class="inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 bg-gray-900 text-gray-200 border border-gray-700 hover:bg-gray-800 cursor-pointer w-full sm:w-auto"
    >
      <span aria-hidden="true">&larr;</span>
      <span class="font-medium">Expressions and Operators</span>
    </button>

    <button
      type="button"
      onclick="document.getElementById('link-functions')?.click()"
      class="inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 bg-gray-800 text-gray-100 hover:bg-gray-700 cursor-pointer w-full sm:w-auto"
    >
      <span class="font-medium">Functions</span>
      <span aria-hidden="true">&rarr;</span>
    </button>
  </div>
</section>